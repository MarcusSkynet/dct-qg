% =======================================================================
% == CANONICAL UNIFIED PREAMBLE FOR THE DCT/QG SERIES (v2.2) ==
% =======================================================================

% ------------------- Fonts, Encoding, Microtype -------------------
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}          % Crisp, scalable fonts
\usepackage{microtype}        % Better kerning/justification

% ------------------- Layout & Spacing -------------------
\usepackage[a4paper,margin=1in]{geometry}
\usepackage{setspace}
\onehalfspacing

% ------------------- Mathematics & Physics -------------------
\usepackage{amsmath,amssymb,mathtools,amsthm}
\usepackage{bm}               % \bm for bold math
\usepackage{mathrsfs}         % \mathscr
\usepackage{upgreek}          % upright Greek, e.g. \upmu
\usepackage{siunitx}          % \SI, \si
\sisetup{per-mode=symbol}     % 1 m/s style
\usepackage{physics}          % \dd, \Tr, \ket, \bra, etc.

% ------------------- Graphics, Floats, Lists, Code -------------------
\usepackage{graphicx}
\graphicspath{{figs/}}        % Project default figures folder
\usepackage{float}
\usepackage{enumitem}
\usepackage{listings}
\usepackage{verbatim}
\usepackage{tikz}
\usepackage{tcolorbox}        % Styled boxes (used below)

% ------------------- Citations, Links, Quotes, Notes -------------------
\usepackage{csquotes}
\usepackage{hyperref}
\hypersetup{colorlinks=true, linkcolor=blue, citecolor=blue, urlcolor=blue}
\usepackage[nameinlink]{cleveref}
\usepackage{orcidlink}        % Optional author ORCID
\usepackage{todonotes}        % Optional

% ------------------- Placeholder citation command -------------------
\makeatletter
\newcommand{\futurecite}[1]{\@gobble} % flip to \cite{#1} later if desired
\makeatother

% --- Custom Colors ---
\definecolor{boardblue}{rgb}{0.05, 0.25, 0.5}
\definecolor{boardgreen}{rgb}{0.1, 0.5, 0.2}
\definecolor{boardred}{rgb}{0.6, 0.1, 0.1}

% =======================================================================
% == Theorem-like environments ==
% =======================================================================
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}
\newtheorem{proposition}{Proposition}
\newtheorem{lemma}{Lemma}

\theoremstyle{definition}
\newtheorem{definition}{Definition}
\newtheorem{law}{Law}
\newtheorem{tdt}{TDT}     % DCT Transdimensional Thermodynamics laws

\theoremstyle{remark}
\newtheorem{remark}{Remark}

% Boxed environment for scope/open items
\newtcolorbox{scopebox}[1][]{
  colback=gray!5,
  colframe=gray!75!black,
  fonttitle=\bfseries,
  title={#1},
  IfValueTF={#1}{}{title={Scope \& Open Items}}
}

% =======================================================================
% == CANONICAL MACROS (grouped) ==
% =======================================================================

% -------- 1) DCT Foundational (core symbols & entropies) --------
\newcommand{\LL}{\mathcal{L}}                 % Ledger surface / worldtube
\newcommand{\Ical}{\mathcal{I}}               % Curvature invariant
\newcommand{\Icrit}{\Ical_{\mathrm{crit}}}    % Critical value
\newcommand{\T}{\mathcal{T}}                  % Transdimensional Constant
\newcommand{\Jcal}{\mathcal{J}}               % Snap instrument / superoperator
\newcommand{\Rcal}{\mathcal{R}}               % Local areal radius “ruler”
\newcommand{\Acal}{\mathcal{A}}               % Dynamical/infinitesimal area
\newcommand{\AP}{\ell_{\mathrm P}^{2}}        % Planck area (4D)
\newcommand{\APD}{{}^{(D)}\!A_{\mathrm P}}    % D-dim Planck area

% Entropies and currents
\newcommand{\Sinfo}{S_{\mathrm{info}}}        % Information (Shannon/vN) entropy
\newcommand{\Sth}{S_{\mathrm{th}}}            % Thermodynamic entropy
\newcommand{\SBH}{S_{\mathrm{BH}}}            % Black-hole thermodynamic entropy
\newcommand{\SL}{S_{\mathcal{L}}}             % Ledger thermodynamic entropy
\newcommand{\entropycurrent}{s}               % Surface entropy current symbol
\newcommand{\entropyinflux}{\Phi_S}           % Entropy influx density (exterior)
\newcommand{\GD}{G_{D}}                       % D-dimensional Newton constant

% -------- 2) Boundary dynamics (sans-serif operators) --------------
\newcommand{\Bop}{\mathsf{B}}                 % Robin boundary operator
\newcommand{\Rrefl}{\mathsf{R}}               % Reflection coefficient / kernel
\newcommand{\Kboundary}{\mathsf{K}}           % Generic boundary kernel

% -------- 3) Actions & effective theories --------------------------
\newcommand{\Lag}{\mathscr{L}}                % Lagrangian density
\newcommand{\Sledger}{S_{\text{ledger}}}      % Ledger EFT action (if used)
\newcommand{\SBC}{S_{\mathrm{BC}}}            % Boundary-condition sector action
\newcommand{\SAH}{A_{\mathcal{EH}}}           % Einstein–Hilbert action

% -------- 4) Standard GR / BH quantities ---------------------------
% Planck-scale & congruence data
\newcommand{\lp}{\ell_{\mathrm P}}            % Planck length
\newcommand{\MP}{M_{\mathrm P}}               % Planck mass
\newcommand{\thet}{\theta}                    % Null congruence expansion

% Black-hole radii, areas, temperatures
\newcommand{\RS}{R_{\mathrm S}}               % Schwarzschild radius
\newcommand{\EH}{\mathrm{H}}                  % Horizon label (A_H, S_H)
\newcommand{\rH}{r_{\mathrm H}}               % D-dim horizon radius
\newcommand{\rL}{r_{\LL}}                     % Ledger radius
\newcommand{\AL}{A_\LL}                       % Ledger area
\newcommand{\AH}{A_{\mathrm H}}               % Horizon area
\newcommand{\THaw}{T_{\mathrm H}}             % Hawking temperature

% Curvature & optical scalars
\newcommand{\Kretsch}{K}                      % Kretschmann scalar (shorthand)
\newcommand{\RRm}{R_{ABCD}R^{ABCD}}           % Kretschmann written-out
\newcommand{\sig}{\sigma_{\mu\nu}\sigma^{\mu\nu}} % Shear norm
\newcommand{\Ric}{R_{\mu\nu}k^\mu k^\nu}      % Ricci focusing term

% Legacy Infinity Bit name (deprecated) and canonical write bit
\newcommand{\br}{b_{\mathrm r}}               % Legacy branch bit (deprecated)
\newcommand{\W}{W}                            % Canonical write (payload) bit

% -------- 5) Mathematical helpers & group theory -------------------
% Basic sets
\newcommand{\RR}{\mathbb{R}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\ZZ}{\mathbb{Z}}

% Lie groups
\newcommand{\SU}{\mathrm{SU}}
\newcommand{\SO}{\mathrm{SO}}
\newcommand{\U}{\mathrm{U}}

% GUT representations
\newcommand{\Ten}{\mathbf{10}}
\newcommand{\Five}{\mathbf{5}}
\newcommand{\Fivebar}{\overline{\mathbf{5}}}
\newcommand{\Tenbar}{\overline{\mathbf{10}}}

% Operators / misc math helpers
\newcommand{\Hom}{\operatorname{Hom}}
\newcommand{\ii}{\mathrm{i}}
\newcommand{\ee}{\mathrm{e}}
\newcommand{\Id}{\mathbb{I}}
\newcommand{\sgn}{\operatorname{sgn}}

% Null normals & NPR projector
\newcommand{\nplus}{{n_{+}}}                  % Outgoing null normal
\newcommand{\nminus}{{n_{-}}}                 % Ingoing null normal
\newcommand{\Pproj}{P^{A}{}_{B}}              % NPR projector

% -------- 6) Quantum / Hilbert space & algorithm helpers ----------
% Hilbert and manifold symbols
\newcommand{\cH}{\mathcal{H}}
\newcommand{\cM}{\mathcal{M}}
\newcommand{\cD}{\mathcal{D}}
\newcommand{\cC}{\mathcal{C}}

% Parent / child phase labels
\newcommand{\Parent}{\mathcal{P}}
\newcommand{\Child}{\mathcal{C}}

% Basic quantum operators
\newcommand{\Hhat}{\widehat{H}}
\newcommand{\Uhat}{\widehat{U}}
\newcommand{\Wop}{\widehat{W}}                % Wilson/write operator on ledger
\newcommand{\QES}{\mathrm{QES}}               % Quantum extremal surface label
\newcommand{\NPR}{\mathrm{NPR}}               % Null–Pair Removal label

% -------- 7) Dimensional tagging helpers ---------------------------
% Usage: \dimtag{D}{R} -> ^{(D)}\!R
\newcommand{\dimtag}[2]{{}^{(#1)}\!{#2}}
\newcommand{\Dtag}{(D)}                       % “(D)” marker
\newcommand{\dtag}{(d)}                       % “(d=D-2)” marker
% Left tags (kept for compatibility with existing docs)
\newcommand{\lDtag}{{}^{\Dtag}}
\newcommand{\ldtag}{{}^{\dtag}}

% -------- 8) Numerical anchors -------------------------------------
\newcommand{\numTval}{0.36067376}             % 1/(4 ln 2)
\newcommand{\numIcritval}{33.27106467}        % 48 ln 2

% -------- 9) Phenomenology modules ---------------------------------
% (a) Echoes & scattering
\newcommand{\El}{\mathsf{E}_{\ell}}
\newcommand{\tauRT}{\tau}                     % Round-trip time / echo delay
\newcommand{\phase}{\varphi}
\newcommand{\Rreflw}{\Rrefl_{\mathrm w,\ell}}
\newcommand{\Rreflb}{\Rrefl_{b,\ell}}
\newcommand{\Tw}{\mathsf{T}_{\mathrm w,\ell}}
\newcommand{\Tb}{\mathsf{T}_{b,\ell}}

% (b) Tensor networks & QEC on the Ledger
\newcommand{\Viso}{V}
\newcommand{\Xtot}{X_{\mathrm{tot}}}
\newcommand{\Ytot}{Y_{\mathrm{tot}}}
\newcommand{\Ztot}{Z_{\mathrm{tot}}}

% (c) Dark matter & remnants
\newcommand{\wgap}{\omega_{\mathrm{gap}}}
\newcommand{\Mrem}{M_{\mathrm{rem}}}
\newcommand{\gH}{\gamma_{\mathrm H}}
\newcommand{\chiH}{\chi}
\newcommand{\betaf}{\beta_{\!f}}

% (d) Dark energy & cosmology
\newcommand{\Hcal}{\mathcal{H}}
\newcommand{\Cdot}{\dot{\mathcal{C}}}
\newcommand{\rhoL}{\rho_{\LL}}
\newcommand{\pL}{p_{\LL}}
\newcommand{\wL}{w_{\LL}}
\newcommand{\csL}{c_{s,\LL}^{2}}
\newcommand{\OM}{\Omega_{\mathrm m}}
\newcommand{\OL}{\Omega_{\LL}}
\newcommand{\ORad}{\Omega_{\mathrm r}}

% (e) Radion & fifth force
\newcommand{\MD}{M_{D}}
\newcommand{\varphiRad}{\varphi}
\newcommand{\mn}{m_n}
\newcommand{\Lef}{L_{\mathrm{eff}}}
\newcommand{\lambdaff}{\lambda_{\mathrm{5th}}}

% =======================================================================
% == BACKWARD COMPATIBILITY SHIMS (safe if already updated) ==
% =======================================================================
% Map legacy/old names to canonical ones so old sources compile unchanged.
\providecommand{\aH}{\T}                     % old alpha_H -> \T
\providecommand{\Area}{\Acal}                % old \Area -> \Acal
\providecommand{\PNPR}{\Pproj}               % old NPR projector macro
\providecommand{\Bboundary}{\Bop}            % old boundary macro
\providecommand{\Rw}{\Rreflw}
\providecommand{\Rb}{\Rreflb}
\providecommand{\tRT}{\tauRT}
\providecommand{\omegaGap}{\wgap}
\providecommand{\Deltaecho}{\tauRT}          % if used as delta-echo time
% Dimensional tags (legacy)
\providecommand{\lPD}{{}^{(D)}\lp}           % legacy Planck length tag (kept)
% Legacy G_D spelling
\providecommand{\GdLegacy}{G_{\mathrm D}}    % helper (no-op unless referenced)

% =======================================================================
% == Notes ==
% 1) Use S_th (thermo) vs S_info (payload) distinctly; equality only at snaps.
% 2) Prefer \GD and \APD in D-dim formulas: S = A/(4 G_D), \Delta A_{(D)} = 4 ln 2 * G_D.
% 3) Keep \lDtag, \ldtag for existing figures/equations; prefer \dimtag{D}{.} in new work.
% =======================================================================
